# 044 帳號密碼驗證

有一個系統，在輸入帳號密碼時需驗證帳號真實性，如果該帳號是合法的，
則系統內部要判別該帳號是否已經註冊過，如果已經註冊過則判別輸入的密碼是否符合最後一次變更的密碼，如果沒有註冊過則在系統內部新增該帳號密碼。
系統會記錄每個使用者最後一次變更(或新增)密碼的時間，並記錄最後三次變更的密碼是什麼，每當已經註冊過的使用者登入成功時，系統會檢查該使用者最後一次變更密碼的時間，並檢查如果該使用者最後一次變更密碼的時間跟當下時間差距超過limit分鐘，則會要求使用者變更密碼，並且使用者變更的密碼不能跟最後三次邊更的密碼一樣。
帳號為個人身份證字號並檢查合法，密碼依照規則計算強度後需大於等於30，才符合系統要求。
在這題目中，不考慮閏年的情況，2月固定為28天，一年固定為365天。

## 身份證合法規則如下：
身份證字號共10碼，
第一碼：區域碼，需為大寫英文字母，A~Z對應數值為10~33(A為10，B為11以此類推)
第二碼：性別碼，需為數字，男生是1，女生是2
第三~九碼：流水號碼
第十碼：檢查碼

## 帳號檢查方法步驟：
1.找出第一位英文字母的對應數值，將英文字轉換成對應值後，產生一個11位數字的數列
2.將此數列前十碼依序乘以1、9、8、7、6、5、4、3、2、1後加總
3.將加總後的值除以模數10取其餘數
4.由模數減去餘數得檢查碼，若餘數為0時，則設定其檢查碼為0
5.前一步驟得到檢查碼需於第十碼檢查碼相符，即為合法身份證字號

以B120667503為例：
1.B的對應數值為11，得到數列11120667503
2.（1 × 1）＋（1 × 9）＋（1 × 8）＋（2 × 7）＋（0 × 6）＋（6 × 5）＋（6 × 4）＋（7 × 3）＋（5 × 2）＋（0 × 1）= 117
3.117除以10得到餘數7
4.10 – 7 = 3
5.與第十碼檢查碼3相同，驗證為合法身份證字號

帳號不合法時的輸出
區域碼不合法輸出：wrong area code
性別碼不為0或1輸出：wrong gender code
檢查碼不合法輸出：illegal
合法輸出：pass

密碼強度計算規則如下：
1.A個英文字母小寫加A分
2.B個英文字母大寫加3*B分
3.C個數字加2*C分
4.D個特殊符號{ ~!@#$%^&*<>_+=}加5*D分
5.有五個以上(包含)數字且任兩個數字在密碼中的位置不相鄰，例如：「9a9a9a9a9」，加15分

【輸入輸出說明】
第一行: 輸入變更密碼的時間限制limit(limit>1)，代表使用者最後一次變更密碼的
時間跟現在時間差距limit分鐘以上時，系統會強制要求使用者變更密碼。
第二行：輸入操作數量n(n>1)，代表後面有n比操作。
後面的每一筆操作會經過以下流程:
1. 輸入現在的時間，時間的格式為: xxxx/xx/xx xx:xx(每個項目的長度固定，所以長度不夠的部分會在前面補0)，例如: 2025/01/09 19:02
2. 輸入帳號(身分證字號)。
3. 如果輸入的帳號不合法，則依據不合法的條件輸出為何不合法，然後重複執行步驟2，直到輸入的帳號合法為止。
4. 如果輸入的帳號合法，則輸出"pass"。
5. 使用者輸入密碼，系統要判斷該密碼強度是多少，如果該密碼強度<30，則輸出"not strong enough"，然後重複執行步驟5，直到輸入的密碼強度>=30為止。
6. 如果輸入的密碼強度>=30，則輸出"ok good password"。
7. 系統依據帳號判斷是否是新用戶。
8. 如果是新用戶的話就在系統內部新增該帳號密碼與新增時間，並輸出"new"，結束當下的這筆操作。
9. 如果是舊用戶的話，判斷輸入的密碼是否正確，如果是錯誤的輸出"wrong"，然後跳到步驟5，重複執行步驟5~9的流程，直到使用者輸入的密碼正確。
10. 如果使用者輸入的密碼正確，輸出"correct"。
11. 系統判斷當下時間跟使用者最後一次變更密碼的時間差距是否>=limit分鐘。
12. 如果時間差距 13. 如果時間差距>=limit分鐘，則輸出"need to change"。
14. 使用者輸入新密碼。
15. 判斷該新密碼強度是否>=30。
16. 如果新密碼強度<30，輸出"not strong enough"，然後重複執行步驟14，直到新密碼強度>=30。
17. 如果新密碼強度>=30，則輸出"ok good password"。
18. 系統判斷新密碼是否跟該使用者最後3次變更的密碼一樣。
19. 如果新密碼跟該使用者最後3次變更的密碼一樣，則輸出"same password"，然後跳到步驟14，直到新密碼跟最後3次變更的密碼不一樣為止。
20. 如果使用者輸入的新密碼跟最後3次變更的密碼不一樣，則輸出"password changed"，然後系統更新該使用者最後3次變更的密碼和最後1次變更密碼的時間，然後結束當下的這筆操作。

範例輸入:
1440 (密碼變更的時間間隔限制1440分鐘)
2 (有兩筆操作)
2025/01/09 00:01 (第一筆操作，現在時間)
#110610340 (不合法帳號)
W110610349 (不合法帳號)
W110610340 (合法帳號)
RichSayHello (強度<30的密碼)
RichSayhello (強度<30的密碼)
oMgThisIsGood~~~~~ (強度>=30的密碼)
2025/04/01 23:59 (第二筆操作，現在時間)
W110610340 (合法帳號)
1234oMgThisIsGood~~~~~ (強度>=30但密碼不正確)
oMg (強度<30的密碼)
oMgThisIsGood~~~~~ (正確密碼)
##### (新密碼，但是強度<30)
oMgThisIsGood~~~~~ (強度>=30的新密碼，但是該密碼跟最後3次變更的密碼一樣)
######## (強度>=30且跟最後3次變更的密碼不一樣的新密碼)

範例輸出:
wrong area code (第一筆操作)
illegal
pass
not strong enough
not strong enough
ok good password
new
pass (第二筆操作)
ok good password
wrong
not strong enough
ok good password
correct
need to change
not strong enough
ok good password
same password
ok good password
password changed

【測試資料一】
輸入:
100
1
2025/01/01 10:00
A123456789
AaBb1234~!00
輸出:
pass
ok good password
new
【測試資料二】
輸入:
100
1
2025/01/01 10:00
a120667503
B120667503
weak
Password123!@#
輸出:
wrong area code
pass
not strong enough
ok good password
new
【測試資料三】
輸入:
100
2
2025/01/01 10:00
A123456789
AaBb1234~!00
2025/01/01 11:39
A123456789
AaBb1234~!00
輸出:
pass
ok good password
new
pass
ok good password
correct
no need to change
【測試資料四】
輸入:
100
2
2025/01/01 10:00
F123456784
1a3b5c7d9e
2025/02/01 10:00
F123456784
1a3b5c7d9e
weak
2a4b6c8d0e
輸出:
pass
ok good password
new
pass
ok good password
correct
need to change
not strong enough
ok good password
password changed



